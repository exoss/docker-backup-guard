version: '3.8'

services:
  rdocker-backup-guard:
    build: .
    container_name: docker-backup-guard
    restart: unless-stopped
    ports:
      - "8501:8501"
    environment:
      - TZ=Europe/Berlin
    volumes:
      # Docker Socket (Required to manage containers)
      - /var/run/docker.sock:/var/run/docker.sock
      # Persistence for configuration file
      #- ./.env:/app/.env
      # Backup storage (Mapped to ./backups on host)
      - ./backups:/backups
      # Rclone configuration (Directly mounted as file)
      - ./config/rclone/rclone.conf:/app/rclone.conf:ro
      # Read-only access to Docker volumes for smart detection
      - /var/lib/docker/volumes:/var/lib/docker/volumes:ro
