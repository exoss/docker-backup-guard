# Release Notes v1.0.4

**Date:** 2026-02-10

This release addresses critical issues with **Portainer Cloud Backups**, introducing comprehensive validation to prevent corrupted archives from being stored.

## ğŸ›¡ï¸ Security & Integrity

*   **Portainer Backup Validation:**
    *   **Content-Type Check:** Now verifies that the API response is actually a file (not an HTML error page or JSON error message).
    *   **File Size Check:** Prevents processing of empty or near-empty files (under 100 bytes).
    *   **Archive Integrity Test:** Executes `tar -tzf` on the downloaded file *before* encryption to ensure the archive is valid and readable.
*   **Corrupted Backup Prevention:** These changes completely eliminate the risk of uploading "successful" but corrupted/empty zip files to the cloud.

## ğŸ› Bug Fixes

*   Fixed a critical flaw where API errors (e.g., "Unauthorized") were saved as `.tar.gz` files and encrypted, resulting in unrecoverable backups.

## ğŸ“¦ Installation / Update

To update to this version, pull the latest image or rebuild locally:

```bash
git pull
docker-compose down
docker-compose up -d --build
```
